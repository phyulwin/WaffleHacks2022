{% extends "style.html" %}
<!--This is the html head.-->
{% block head %}


{% endblock %}
<!--This is the html body.-->
{% block body %}

<div class="main">
  <div class="welcomemsg">
  {% if session %}
    <h1 id="greet">Welcome {{session.userinfo.name}}!</h1>
  {% else %}
    <h1 id="greet" style="font-family: 'Amatic SC', cursive;">Welcome Guest</h1>
    <button id="alltype" ><a href=/login>Login</a></button>
  {% endif %}
  </div> <!--end of welcomemsg class-->
  
  {% if session %}
    <div class = "chatbox" style="overflow:hidden;width:max-content;height:40vh;">
    <div id=connpop style="height:100%;width:100%;margin:auto;"> 
    <form action="/connect" method="post">
        <h3 style="width:100%;text-align:center;">JOIN A STUDY GROUP</h3>
        <label>
          <input type="radio" id="subject" name="Art" value="0"/>&nbspART/HUMANITIES
        </label>
        <label>
          <input type="radio" id="subject" name="Science" value="1"/>&nbspMATH/SCIENCES
        </label
        <label style="white-space:nowrap;clear:both;">
          <input type="radio" id="subject" name="Everyday" value="2"/>&nbspCASUAL CHAT
        </label>
      <button type="submit" onclick="chatbox()" style="">connect</button>
    </div>
    </form>
        
    <div id="chatpop" style="filter:opacity(0%);flex-direction:column;">
      <h3 style="font-family:'Amatic SC',cursive;width:100%;text-align:center;">{{session.userinfo.name}}'s CHAT</h3>
      <ul id="messages" style="list-style: none;padding:0px;font-size:1vw;"></ul>
      <div class="write">
        <input type="text" id="message">
          <button id="add" onclick="AddLi(message.value)">Send</button>
      </div>
    </div>
  </div>
{% endif %}
</div>

<!--make the Play/Pause Audio smaller?-->
<div class="bottom">
  <div class="musicinfo" style="">
    <audio id="idAudio">
  		<source src="{{url_for('static', filename='campfire.mp3')}}" type="audio/mpeg">
    </audio>
    <button onclick="play_Audio()" type="button">
      <img src="https://i.imgur.com/UrAFv3h.png" style="height:7vw;">
    </button>
    <button onclick="pause_Audio()" type="button" >
      <img src="https://i.imgur.com/rSEFahk.png" style="height:7vw;">
    </button>
  </div>
</div>


<script>
  //confetti button script
  var animateButton = function(e) {

    e.preventDefault;
    //reset animation
    e.target.classList.remove('animate');
  
    e.target.classList.add('animate');
    setTimeout(function(){
      e.target.classList.remove('animate');
    },700);
  };
  
  var classname = document.getElementsByClassName("confetti-button");
  
  for (var i = 0; i < classname.length; i++) {
    classname[i].addEventListener('click', animateButton, false);
  }

  //audio script
  var GFG = document.getElementById("idAudio");
  function play_Audio() {
    GFG.play();
  }

  function pause_Audio() {
    GFG.pause();
  }

  function AddLi(str)
  {
      var li = document.createElement('li');
      li.appendChild(document.createTextNode(str))
      document.getElementById("messages").appendChild(li);
    document.querySelector('#message').value = "";
  }


function chatbox(){
  var elem = document.getElementById("connpop");
  elem.remove();
  document.getElementById("chatpop").style.filter="opacity(100%)";
}
document.getElementById('message')
  .addEventListener('keyup', function(event) {
      if (event.code === 'Enter')
      {
        AddLi(document.getElementByID('text').value())
      }
  });
</script>
{% endblock %}

