{% extends "style.html" %}
<!--This is the html head.-->
{% block head %}


{% endblock %}
<!--This is the html body.-->
{% block body %}

<div class="main">
  <div class="welcomemsg">
  {% if session %}
    <h1 id="greet" style="font-family: 'Amatic SC', cursive;">Campâ€¢Study</h1>
  {% else %}
    <h1 id="greet" style="font-family: 'Amatic SC', cursive;">Welcome Guest</h1>
    <button id="alltype" ><a href=/login>Login</a></button>
  {% endif %}
  </div> <!--end of welcomemsg class-->
  
  {% if session %}
    <div id = "connpop" class="chatbox" style="width:min-content;height:40vh;">
        <h3 style="width:100%;text-align:center;font-family: 'Amatic SC', cursive;">JOIN A STUDY GROUP</h3>
        <label>
          <input type="radio" id="subject" name="subject">ART/HUMANITIES
        </label>
        <label>
          <input type="radio" id="subject" name="subject">MATH/SCIENCES
        </label>
        <label style="white-space:nowrap;clear:both;">
          <input type="radio" id="subject" name="subject">CASUAL CHAT
        </label>
      <button onclick="chatbox()">connect</button>
    </div>  

        
    <div id="chatpop" class="chatbox" style="filter:opacity(0%);flex-direction:column;">
      <h3 style="font-family:'Amatic SC',cursive;width:100%;text-align:center;">{{session.userinfo.name}}'s CHATBOX</h3>
      <ul id="messages" style="list-style: none;padding:0px;font-size:2vw;"></ul>
      <div class="write">
        <input type="text" id="message"></input>
          <button id="add" onclick="AddLi(message.value)">Send</button>
      </div>
      <button onclick="connectbox()">Go Back</button>
    </div>

{% endif %}
</div>

<!--Audio Play/Pause buttons-->
<div class="bottom">
  <div id='radio' style="margin-top:auto;margin-bottom:auto;">
  <img src="https://i.imgur.com/5phFYbt.png" style="height:20vh;">
  <div class="musicinfo" style="margin-top:5vh;">
    <audio id="idAudio">
  		<source src="{{url_for('static', filename='campfire.mp3')}}" type="audio/mpeg">
    </audio>
    <button onclick="play_Audio()" type="button">
      <img src="https://i.imgur.com/UrAFv3h.png" style="height:7vw;">
    </button>
    <button onclick="pause_Audio()" type="button" >
      <img src="https://i.imgur.com/rSEFahk.png" style="height:7vw;">
    </button>
  </div>
  </div>
</div>


<script>
  //audio script
  var GFG = document.getElementById("idAudio");
  function play_Audio() {
    GFG.play();
  }

  function pause_Audio() {
    GFG.pause();
  }

  function AddLi(str)
  {
      var li = document.createElement('li');
      li.appendChild(document.createTextNode(str))
      document.getElementById("messages").appendChild(li);
    document.querySelector('#message').value = "";
  }


function chatbox(){
  var connectbox = document.getElementById("connpop");
  connectbox.style.display="none";
  document.getElementById("chatpop").style.filter="opacity(100%)";
}
document.getElementById('message')
  .addEventListener('keyup', function(event) {
      if (event.code === 'Enter')
      {
        AddLi(document.getElementByID('text').value())
      }
  });
  //this is to show connect box when removing chat
function connectbox(){
  var chatbox=document.getElementById("chatpop");
  chatbox.style.display="none";
  document.getElementById("connpop").style.filter="opacity(100%)";
}
</script>
{% endblock %}