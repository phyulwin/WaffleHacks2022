{% extends "style.html" %}
<!--This is the html head.-->
{% block head %}
<title>Waffle Hacks 2022</title>
<script <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/1.4.8/socket.io.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
{% endblock %}

<!--This is the html body.-->
{% block body %}
<script type="text/javascript">
  $(document).ready(function() {
  
  	var socket = io.connect((host='0.0.0.0', port=81));
  
  	socket.on('connect', function() {
  		socket.send('User has connected!');
  	});
  
  	socket.on('message', function(msg) {
  		$("#messages").append('<li>'+msg+'</li>');
  		console.log('Received message');
  	});
  
  	$('#sendbutton').on('click', function() {
  		socket.send($('#myMessage').val());
  		$('#myMessage').val('');
  	});
  
  });
</script>


<div class="welcomemsg">
<!--If user is logged in, username will be displayed-->
  {% if session %}
    <h1 id="greet">Welcome {{session.userinfo.name}}!</h1>
    <button id="alltype"><a href=/>Connect</a></button>
  {% else %}
    <h1 id="greet">Welcome Guest</h1>
    <button id="alltype"><a href=/login>Login</a></button>
  {% endif %}
</div>


<div class="main">
  <div class = "chatbox">
    <h3 style="width:100%;text-align:center;">chat</h3>
    <ul id="messages"></ul>
    <div class="write">
      <input type="text" id="myMessage">
      <button id="sendbutton">Send</button>
    </div>
  </div>
</div>


<div class="bottom">
  <img src="https://images.vexels.com/media/users/3/252400/isolated/preview/802fcc71fc51ed2878c1c84266d2351a-colorful-retro-radio-machine.png" id="radio">
  <div class="musicinfo">-----MUSIC INFO-----</div>
</div>
{% endblock %}

